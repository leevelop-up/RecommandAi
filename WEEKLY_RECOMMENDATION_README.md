# ê¸ˆì£¼ ì¶”ì²œ ì‹œìŠ¤í…œ (Weekly Recommendation System)

## ê°œìš”

ë‰´ìŠ¤ì™€ ì°¨íŠ¸ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ê¸ˆì£¼ íˆ¬ì ì¶”ì²œì„ ìƒì„±í•˜ëŠ” AI ê¸°ë°˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•

- **ğŸ”¥ Hot í…Œë§ˆ 10ê°œ**: ë“±ë½ë¥ ê³¼ ë‰´ìŠ¤ ë¹ˆë„ ê¸°ë°˜ ì‹¤ì‹œê°„ í…Œë§ˆ ë¶„ì„
- **ğŸ“ˆ ê¸ˆì£¼ ì¶”ì²œ ì¢…ëª© 30ê°œ**: í•œêµ­ + ë¯¸êµ­ í†µí•© ì¶”ì²œ (ìƒì„¸ ì¬ë¬´ ì •ë³´ í¬í•¨)
- **ğŸ¤– ë“€ì–¼ AI ë¶„ì„**: Gemini + Groq ë™ì‹œ ë¶„ì„ìœ¼ë¡œ ë‹¤ê°ë„ íˆ¬ì ì¸ì‚¬ì´íŠ¸ ì œê³µ
- **ğŸ“° ë‰´ìŠ¤ ê¸°ë°˜ ë™ì  ë¶„ì„**: í•˜ë“œì½”ë”© ì—†ì´ ì‹¤ì œ ë‰´ìŠ¤ ë°ì´í„° ê¸°ë°˜ ì¶”ì²œ
- **â° ìŠ¤ì¼€ì¤„ ì‹¤í–‰**: 08:00 ë°ì´í„° ìˆ˜ì§‘ â†’ 09:00 ì¶”ì²œ ìƒì„±

## ë°ì´í„° êµ¬ì¡°

### Hot í…Œë§ˆ (10ê°œ)
- í…Œë§ˆ ì ìˆ˜ (0-100)
- ë“±ë½ë¥  ë° ì „ì¼ëŒ€ë¹„ ë³€í™”
- 1ì°¨/2ì°¨/3ì°¨ ê´€ë ¨ì£¼ (ê³„ì¸µë³„ ë¶„ë¥˜)
- ê´€ë ¨ ë‰´ìŠ¤

### ê¸ˆì£¼ ì¶”ì²œ ì¢…ëª© (30ê°œ)
- í˜„ì¬ê°€, ì „ì¼ëŒ€ë¹„, ë“±ë½ë¥ 
- ì‹œê°€ì´ì•¡, PER, PBR, ë°°ë‹¹ë¥ 
- ì• ë„ë¦¬ìŠ¤íŠ¸ í‰ê°€
- 6ê°œì›” ì°¨íŠ¸ ë°ì´í„°
- ê´€ë ¨ ë‰´ìŠ¤ (ìµœëŒ€ 5ê°œ)
- íˆ¬ì í¬ì¸íŠ¸

### AI ì¶”ì²œ (Gemini + Groq)
ê° AIë³„ë¡œ ë‹¤ìŒ ë‚´ìš© ì œê³µ:
- ì‹œì¥ ë¶„ì„ (í•œêµ­/ë¯¸êµ­ ì „ë§)
- Top 10 ì¶”ì²œ ì¢…ëª© (êµ¬ì²´ì  ë§¤ìˆ˜ê°€/ëª©í‘œê°€/ì†ì ˆê°€)
- ì„¹í„°ë³„ ì¶”ì²œ
- ë¦¬ìŠ¤í¬ ê²½ê³ 
- íˆ¬ì ì „ëµ

## ì‹¤í–‰ ë°©ë²•

### 1. ì¦‰ì‹œ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸)

```bash
# ê¸ˆì£¼ ì¶”ì²œ ìƒì„± (Gemini + Groq ë“€ì–¼ AI)
python run_weekly_recommendation.py

# ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ì¦‰ì‹œ 1íšŒ ì‹¤í–‰
python scheduler.py --mode weekly --once
```

### 2. ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ (ìë™í™”)

```bash
# ê¸°ë³¸ (08:00, 09:00 ìë™ ì‹¤í–‰)
python scheduler.py

# ì»¤ìŠ¤í…€ ì‹œê°„
python scheduler.py --times 07:00 08:00

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup python scheduler.py > scheduler.log 2>&1 &
```

### 3. Cron ë“±ë¡ (ì„œë²„)

```bash
crontab -e

# í‰ì¼ ë§¤ì¼ 08:00ì— ì‹¤í–‰
0 8 * * 1-5 cd /path/to/recommandai && /usr/bin/python3 run_weekly_recommendation.py
```

## í™˜ê²½ ë³€ìˆ˜ (.env)

```env
# Gemini API (í•„ìˆ˜)
GEMINI_API_KEY=your-gemini-api-key

# Groq API (í•„ìˆ˜)
GROQ_API_KEY=your-groq-api-key

# ë„¤ì´ë²„ API (ë‰´ìŠ¤ ìˆ˜ì§‘ìš©, ì„ íƒ)
NAVER_CLIENT_ID=your-naver-client-id
NAVER_CLIENT_SECRET=your-naver-client-secret
```

## ì¶œë ¥ íŒŒì¼

### JSON íŒŒì¼ (`output/weekly_recommendation_YYYYMMDD_HHMMSS.json`)

ì™„ì „í•œ ë°ì´í„° êµ¬ì¡°:
```json
{
  "generated_at": "2026-02-02T08:00:00",
  "schedule_time": "09:00",
  "hot_themes": [...],
  "weekly_recommendations": [...],
  "ai_recommendations": {
    "gemini": {...},
    "groq": {...}
  },
  "market_overview": {...}
}
```

### í…ìŠ¤íŠ¸ ë¦¬í¬íŠ¸ (`output/weekly_recommendation_YYYYMMDD_HHMMSS.txt`)

ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹ì˜ ìš”ì•½ ë¦¬í¬íŠ¸

## ì•„í‚¤í…ì²˜

```
run_weekly_recommendation.py
â”œâ”€â”€ EnhancedDataCollector (ê°•í™”ëœ ë°ì´í„° ìˆ˜ì§‘)
â”‚   â”œâ”€â”€ collect_hot_themes() â†’ Hot í…Œë§ˆ 10ê°œ
â”‚   â”œâ”€â”€ collect_weekly_stocks() â†’ ì¶”ì²œ ì¢…ëª© 30ê°œ
â”‚   â””â”€â”€ collect_comprehensive_news() â†’ ì‹œì¥ ë‰´ìŠ¤
â”‚
â””â”€â”€ WeeklyRecommender (AI ì¶”ì²œ ìƒì„±)
    â”œâ”€â”€ Gemini AI ë¶„ì„
    â””â”€â”€ Groq AI ë¶„ì„
```

### í•µì‹¬ ëª¨ë“ˆ

- **`processors/enhanced_data_collector.py`**: ê°•í™”ëœ ë°ì´í„° ìˆ˜ì§‘ê¸°
- **`processors/weekly_recommender.py`**: AI ê¸°ë°˜ ì¶”ì²œ ìƒì„±ê¸°
- **`scrapers/korea/dynamic_theme_scraper.py`**: ë™ì  í…Œë§ˆ ìŠ¤í¬ë˜í¼ (1ì°¨/2ì°¨/3ì°¨ ê´€ë ¨ì£¼)
- **`scrapers/news/comprehensive_news_scraper.py`**: ì¢…í•© ë‰´ìŠ¤ ìˆ˜ì§‘ê¸°

## ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ë¹„êµ

| êµ¬ë¶„ | ê¸°ì¡´ ì‹œìŠ¤í…œ | ê¸ˆì£¼ ì¶”ì²œ ì‹œìŠ¤í…œ |
|------|------------|------------------|
| AI ì—”ì§„ | ë‹¨ì¼ (Gemini or Groq) | ë“€ì–¼ (Gemini + Groq) |
| ì¢…ëª© ìˆ˜ | ~40ê°œ (ê³ ì • watchlist) | 30ê°œ (ë™ì  ì„ ë³„) |
| í…Œë§ˆ ë¶„ì„ | ê°„ë‹¨í•œ í…Œë§ˆ ì •ë³´ | Hot í…Œë§ˆ 10ê°œ + ê³„ì¸µë³„ ê´€ë ¨ì£¼ |
| ë‰´ìŠ¤ í†µí•© | ì œí•œì  | ì¢…í•© ë‰´ìŠ¤ ìˆ˜ì§‘ (8+ ì†ŒìŠ¤) |
| ì‹¤í–‰ ì‹œê°„ | 08:30, 12:30, 15:30 | 08:00 (ìˆ˜ì§‘), 09:00 (ì¶”ì²œ) |
| ì¶œë ¥ í˜•ì‹ | ë‹¨ìˆœ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ | êµ¬ì¡°í™”ëœ íˆ¬ì ë¦¬í¬íŠ¸ |

## ë°ì´í„° ì†ŒìŠ¤

### í•œêµ­ ì‹œì¥
- ë„¤ì´ë²„ ê¸ˆìœµ (ì‹¤ì‹œê°„ ê°€ê²©, í…Œë§ˆ, ë‰´ìŠ¤)
- KRX (í€ë”ë©˜í„¸ ë°ì´í„°)
- ë‹¤ìŒ ë‰´ìŠ¤
- ë§¤ì¼ê²½ì œ, í•œêµ­ê²½ì œ, ì„œìš¸ê²½ì œ
- ì—°í•©ë‰´ìŠ¤

### ë¯¸êµ­ ì‹œì¥
- Yahoo Finance (ê°€ê²©, í€ë”ë©˜í„¸, ë‰´ìŠ¤)
- Google News RSS

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### API í‚¤ ì˜¤ë¥˜
```bash
# .env íŒŒì¼ í™•ì¸
cat .env | grep API_KEY

# API í‚¤ ìœ íš¨ì„± í…ŒìŠ¤íŠ¸
python -c "from config.settings import get_settings; s = get_settings(); print(f'Gemini: {bool(s.GEMINI_API_KEY)}, Groq: {bool(s.GROQ_API_KEY)}')"
```

### ìŠ¤í¬ë˜í•‘ ì‹¤íŒ¨
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
- ë”œë ˆì´ ì„¤ì • ì¡°ì • (ë„ˆë¬´ ë¹ ë¥¸ ìš”ì²­ ë°©ì§€)
- User-Agent í—¤ë” í™•ì¸

### ë©”ëª¨ë¦¬ ë¶€ì¡±
- ìˆ˜ì§‘ ì¢…ëª© ìˆ˜ ì¡°ì •
- ë‰´ìŠ¤ ìˆ˜ì§‘ ì œí•œ
- í˜ì´ì§• ì„¤ì • ì¡°ì •

## ë¼ì´ì„ ìŠ¤

MIT License

## ë¬¸ì˜

Issues: https://github.com/yourusername/RecommandAi/issues
